---
title: 性能优化-屏幕适配
date: 2022-06-28 01:10:29
tags:
  - Android
  - FrameWork
  - 性能优化
---



# 性能优化-屏幕适配



## **几个重要的概念**

### **屏幕尺寸**

屏幕尺寸指屏幕的对角线的长度，单位是英寸，1英寸=2.54厘米

> 比如常见的屏幕尺寸有2.4、2.8、3.5、3.7、4.2、5.0、5.5、6.0等

### **屏幕分辨率**

屏幕分辨率是指在横纵向上的像素点数，单位是px，1px=1个像素点。一般以纵向像素*横向像素，如1960*1080。表示宽度方向上有1080个像素点，在高度方向上有1920个像素点

> 单位：px（pixel），1px=1像素点
>
> Android手机常见的分辨率：320x480、480x800、720x1280、1080x1920\
>
> UI设计师的设计图会以px作为统一的计量单位

<!--more-->



### **屏幕像素密度**

屏幕像素密度是指每英寸上的像素点数，单位是dpi，即“dot per inch”的缩写。屏幕像素密度与屏幕尺寸和屏幕分辨率有关，在单一变化条件下，屏幕尺寸越小、分辨率越高，像素密度越大，反之越小。

> 假设设备内每英寸有160个像素，那么该设备的屏幕像素密度=160dpi

安卓手机对于每类手机屏幕大小都有一个相应的屏幕像素密度：

| **密度类型**         | **代表的分辨率（**px） | 屏幕像素密度（dpi） |
| -------------------- | ---------------------- | ------------------- |
| 低密度（ldpi）       | 240x320                | 120                 |
| 中密度（mdpi）       | 320x480                | 160                 |
| 高密度（hdpi）       | 480x800                | 240                 |
| 超高密度（xhdpi）    | 720x1280               | 320                 |
| 超超高密度（xxhdpi） | 1080x1920              | 480                 |





#### **屏幕尺寸、分辨率、像素密度三者关系**

一部手机的分辨率是宽x高，屏幕大小是以寸为单位，那么三者的关系是：

![图片](https://s2.loli.net/2022/06/15/YXgOHUnRTQaf3Vj.png)



![图片](https://s2.loli.net/2022/06/15/LXfnaD5q9FvSZNC.png)



### **密度无关像素**

density-independent pixel，叫dp或dip，与终端上的实际物理像素点无关。可以保证在不同屏幕像素密度的设备上显示相同的效果

> Android开发时用dp而不是px单位设置图片大小，是Android特有的单位
>
> 场景：假如同样都是画一条长度是屏幕一半的线，如果使用px作为计量单位，那么在480x800分辨率手机上设置应为240px；在320x480的手机上应设置为160px，二者设置就不同了；如果使用dp为单位，在这两种分辨率下，160dp都显示为屏幕一半的长度。



#### dp与px的转换

**px = dp * (dpi / 160)**

| **密度类型**         | **代表的分辨率（**px） | 屏幕像素密度（dpi） | 换算（px/dp） | **比例** |
| -------------------- | ---------------------- | ------------------- | ------------- | -------- |
| 低密度（ldpi）       | 240x320                | 120                 | 1dp=0.75px    | 3        |
| 中密度（mdpi）       | 320x480                | 160                 | 1dp=1px       | 4        |
| 高密度（hdpi）       | 480x800                | 240                 | 1dp=1.5px     | 6        |
| 超高密度（xhdpi）    | 720x1280               | 320                 | 1dp=2px       | 8        |
| 超超高密度（xxhdpi） | 1080x1920              | 480                 | 1dp=3px       | 12       |

在Android中，规定以160dpi（即屏幕分辨率为320x480）为基准：1dp=1px



### **独立比例像素**

sp，即scale-independent pixels，与dp类似，但是可以根据文字大小首选项进行放缩，是设置字体大小的御用单位。





## **解决方案**

### **使用备用布局** -使用限定符

- 尺寸（size）限定符
- 使用最小宽（Smallest-width）度限定符
- 布局别名
- 屏幕方向（Orientation）限定符



### **创建可拉伸的九宫格位图(.9)**

.9



### **今日头条适配方案**

px值 = dp值 * metrics.density ，这里的 density 是指的手机的屏幕密度，由系统提供，不同的手机的 density 可能不同；所以我们不能直接使用系统的 density ，需要篡改 density 来达到适配的目的。

> 今日头条屏幕适配方案的核心原理在于，根据以下公式算出 density
>
> 当前设备屏幕总宽度（单位为像素）/ 设计图总宽度（单位为 dp) = density
>
> density 的意思就是 1 dp 占当前设备多少像素
>
> 支持以宽或者高一个维度去适配，保持该维度上和设计图一致；



### **百分比适配**

1. 以某一分辨率为基准，生成所有分辨率对应像素数列表
2. 将生成像素数列表存放在res目录下对应的values文件下
3. 根据UI设计师给出设计图上的尺寸，找到对应像素数的单位，然后设置给控件即可